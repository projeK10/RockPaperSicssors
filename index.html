<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RockPaperScissorsGame</title>
</head>
<body>
    <script>
        let playerWins = 0;
        let computerWins = 0;
        let playerPlay
        let letsPlayAgain = false;
        wantToPlay();

        function wantToPlay() {
            playerPlay = prompt(`Would you like to play rock paper scissors?`, "Yes");
            playerPlay = playerPlay.trim().slice(0,1).toUpperCase() + playerPlay.trim().slice(1).toLowerCase();
            if (playerPlay === "Yes") {
                game()
            } else {
                alert("Ok, if you change your mind reload the page to play");
            }
        }

        function getComputerChoice() {
            let valueChoice;
            let getRandomNumber = Math.floor((Math.random() * 3));
            switch (true) {
                case getRandomNumber === 0:
                        valueChoice = "Rock";
                        break;
                case getRandomNumber === 1:
                        valueChoice = "Scissors";
                        break;
                case getRandomNumber === 2:
                        valueChoice = "Paper";
                        break;
                default:
                        valueChoice = "Something went wrong";
                        break; 
            }
            return valueChoice;
        }

        function playRound(playerSelection, computerSelection) {
            playersAnswer = playerSelection.trim().slice(0,1).toUpperCase() + playerSelection.trim().slice(1).toLowerCase();
            let Winner;
            switch (true) {
                case playersAnswer === "Rock" && computerSelection === "Scissors" || playersAnswer === "Scissors" && computerSelection === "Paper" || playersAnswer === "Paper" && computerSelection === "Rock":
                    Winner = "Player wins! Computer loses";
                    playerWins++
                    break;
                case playersAnswer === "Rock" && computerSelection === "Paper" || playersAnswer === "Scissors" && computerSelection === "Rock" || playersAnswer === "Paper" && computerSelection === "Scissors":
                    Winner = "Computer wins! Player loses";
                    computerWins++
                    break;
                case playersAnswer === "Rock" && computerSelection === "Rock" || playersAnswer === "Paper" && computerSelection === "Paper" || playersAnswer === "Scissors" && computerSelection === "Scissors":
                    Winner = "It's a tie!";
                    break;
                default: 
                    Winner = "Something went wrong";
                    break;
            }

            return Winner;
        }
        function game() {
            let pleaseRun = false;
            let numberOfMoreWins;
                for (let i = 1; i < 6; i++) {
                playerSelection = prompt(`Round number ${i}: Pick either rock, paper, or scissors`, "rock");
                playerSelection = playerSelection.trim().slice(0,1).toUpperCase() + playerSelection.trim().slice(1).toLowerCase();
                if (playerSelection === "Rock" || playerSelection === "Paper" || playerSelection === "Scissors") {
                    let computerSelection = getComputerChoice();
                    alert(playRound(playerSelection, computerSelection));
                    if (i === 5) {
                        pleaseRun = true;
                    }
                } else {
                alert("Please type in either rock, paper or scissors.");
                i--
                }
            }

            if (pleaseRun === true) {
                if (playerWins > computerWins) {
                numberOfMoreWins = playerWins - computerWins;
                alert(`In the end, the player is the winner with ${numberOfMoreWins} more wins than the computer. Press "Ok" to play again!`);
                letsPlayAgain = true
                } else if (playerWins < computerWins) {
                    numberOfMoreWins = computerWins - playerWins;
                    alert(`In the end, the computer is the winner with ${numberOfMoreWins} more wins than the player. Press "Ok" to play again!`);
                    letsPlayAgain = true
                } else if (playerWins === computerWins && playerWins !== 1 && computerWins !== 1) {
                    alert(`In the end it's a tie with both the computer and player getting ${playerWins} wins. Press "Ok" to play again!`);
                    letsPlayAgain = true
                } else {
                    alert(`In the end it's a tie with both the computer and player getting ${playerWins} win. Press "Ok" to play again!`);
                    letsPlayAgain = true
                }
            }
            if (letsPlayAgain === true) {
            game();
            }
        }

    </script>
</body>
</html>